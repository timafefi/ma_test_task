# 4lapy.ru
## Endpoint
Для начала необходимо было найти нужные эндпоинты. Для этого нужно
  * запустить эмулятор Android на Android SDK
  * скачать любой сниффер траффика (я выбрал Requestly), и настроить прокси на эмуляторе
  * после подключения к прокси приложение 4lapy откажется работать из-за неверных сертификатов, поэтому нужно сделать unpinssl. В этом нам помогут Frida и ApkTool (получить root права)
![setup](https://github.com/timafefi/ma_test_task/blob/master/img/2024-03-30_18-59.png)
## Requests
После успешного выполнения пунктов выше, перехватываем нужный эндпоинт:
![endpoint](https://github.com/timafefi/ma_test_task/blob/master/img/2024-03-30_21-00.png)

Но вот беда, изменяя параметры реквеста мы получаем ошибку подписи sign. Насколько я понял, в sign хранится шифрованая HMAC-sha256 подпись всего реквеста. Sign меняется с каждым запросом, а значение token, напротив, остаётся неизменным, поэтому единственное, что остается для решения задачи -  научиться эмитировать такие подписи
.
Но для создания подписи sign помимо всего прочего нужен секретный ключ. Этот секретный ключ мне найти не удалось. Возможно он вшит в приложение, как сертификат безопасности из предыдущего пункта, но мне не удалось ничего найти.
Скоипт check_sign должен генерировать нужную попись, если прописать туда правильный ключ. parser.py должен считывает первые 10 товаров в каталоге. Спарсить работающие реквесты - дело техники, самое главное найти откуда берется ключ.

**Если так получится, что после проверки задания вы сможете рассказать мне, как довести задание до конца, я буду вам очень признателен!**
